{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"54627953-91354900f2659ddc705c1dc29\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nlet currentQuery = \"\";\n\nexport async function getImagesByQuery(query, page = 1) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      per_page: 15,\n      page: page\n    }\n  });\n  return response.data;\n}\n\nexport function setQuery(query) {\n  currentQuery = query;\n}\n\nexport function getQuery() {\n  return currentQuery;\n}","import SimpleLightbox from \"simplelightbox\";\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  navButtons: true,\n  navText: ['←', '→'],\n  showCounter: true\n});\n\nexport function createGallery(images) {\n  const galleryContainer = document.querySelector(\".gallery\");\n\n  const markup = images\n    .map(image => `\n      <li class=\"photo-card\">\n        <a href=\"${image.largeImageURL}\">\n          <img class=\"gal_element\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class=\"stats\">\n          <div class=\"stat-item\">\n            <p class=\"stat-title\">Likes</p>\n            <p>${image.likes}</p>\n          </div>\n          <div class=\"stat-item\">\n            <p class=\"stat-title\">Views</p>\n            <p>${image.views}</p>\n          </div>\n          <div class=\"stat-item\">\n            <p class=\"stat-title\">Comments</p>\n            <p>${image.comments}</p>\n          </div>\n          <div class=\"stat-item\">\n            <p class=\"stat-title\">Downloads</p>\n            <p>${image.downloads}</p>\n          </div>\n        </div>\n      </li>\n    `)\n    .join(\"\");\n\n  galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n  gallery.refresh();\n}\n\nexport function clearGallery() {\n  const galleryContainer = document.querySelector(\".gallery\");\n  galleryContainer.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  const loader = document.querySelector(\".loader\");\n  loader.classList.add(\"is-loading\");\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector(\".loader\");\n  loader.classList.remove(\"is-loading\");\n}\n\nexport function showLoadMoreButton() {\n  const loadMore = document.querySelector(\".loadMore\");\n  loadMore.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  const loadMore = document.querySelector(\".loadMore\");\n  loadMore.classList.add(\"hidden\");\n}","import { getImagesByQuery, setQuery, getQuery } from \"./js/pixabay-api.js\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions.js\";\nimport iziToast from 'izitoast';\n\nlet form = document.querySelector('.form');\nlet loadMore = document.querySelector('.loadMore');\nlet searchInput = document.querySelector('input[name=\"search-text\"]');\nlet currentPage = 1;\nlet totalPages = 0;\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  const query = searchInput.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query',\n      titleColor: \"#fff\",\n      messageColor: \"#fff\",\n      position: 'topRight'\n    });\n    return;\n  }\n\n  setQuery(query);\n  currentPage = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query, currentPage);\n    hideLoader();\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'No results',\n        message: 'Sorry, there are no images matching your search query. Please, try again!',\n        titleColor: \"#fff\",\n        messageColor: \"#fff\",\n        backgroundColor: \"#EF4040\",\n        position: 'topRight'\n      });\n      return;\n    }\n\n    totalPages = Math.ceil(data.totalHits / 15);\n    createGallery(data.hits);\n\n    if (currentPage < totalPages) {\n      showLoadMoreButton();\n    } else if (data.hits.length > 0) {\n      iziToast.info({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        titleColor: \"#fff\",\n        messageColor: \"#fff\",\n        position: 'topRight'\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again.',\n      titleColor: \"#fff\",\n      messageColor: \"#fff\",\n      backgroundColor: \"#EF4040\",\n      position: 'topRight'\n    });\n  }\n});\n\nloadMore.addEventListener('click', async () => {\n  currentPage++;\n  const query = getQuery();\n\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query, currentPage);\n    hideLoader();\n    createGallery(data.hits);\n\n    // Scroll to gallery\n    const firstPhoto = document.querySelector('.photo-card');\n    const photoHeight = firstPhoto.getBoundingClientRect().height;\n    window.scrollBy({\n      top: photoHeight * 2,\n      behavior: 'smooth'\n    });\n\n    if (currentPage < totalPages) {\n      showLoadMoreButton();\n    } else {\n      iziToast.info({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        titleColor: \"#fff\",\n        messageColor: \"#fff\",\n        position: 'topRight'\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    showLoadMoreButton();\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again.',\n      titleColor: \"#fff\",\n      messageColor: \"#fff\",\n      backgroundColor: \"#EF4040\",\n      position: 'topRight'\n    });\n  }\n});"],"names":["API_KEY","BASE_URL","currentQuery","getImagesByQuery","query","page","axios","setQuery","getQuery","gallery","SimpleLightbox","createGallery","images","galleryContainer","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","loadMore","searchInput","currentPage","totalPages","event","iziToast","data","photoHeight"],"mappings":"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"}