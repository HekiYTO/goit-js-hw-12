{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"54627953-91354900f2659ddc705c1dc29\";\n\nlet pageCount = 1;\nlet currentQuery = \"\";\n\nexport async function getImagesByQuery(query) {\n  const response = await axios.get(\"https://pixabay.com/api/\", {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      per_page: 15,\n      page: pageCount\n    }\n  });\n  return response.data.hits;\n}\n\n\nexport function resetPage() {\n  pageCount = 1;\n}\n\nexport function nextPage() {\n  pageCount++;\n}\n\nexport function getPage() {\n  return pageCount\n}\n\nexport function setQuery(query) {\n  currentQuery = query;\n}\n\nexport function getQuery() {\n  return currentQuery;\n}","import SimpleLightbox from \"simplelightbox\";\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  navButtons: true,\n  navText: ['←', '→'],\n  showCounter: true\n});\n\nfunction createGallery(images) {\n  const galleryContainer = document.querySelector(\".gallery\");\n\n  const markup = images\n    .map(image => `\n      <li class=\"photo-card\">\n        <a href=\"${image.largeImageURL}\">\n          <img class=\"gal_element\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class=\"stats\">\n          <div class=\"stat-item\">\n            <p class=\"stat-title\">Likes</p>\n            <p>${image.likes}</p>\n          </div>\n          <div class=\"stat-item\">\n            <p class=\"stat-title\">Views</p>\n            <p>${image.views}</p>\n          </div>\n          <div class=\"stat-item\">\n            <p class=\"stat-title\">Comments</p>\n            <p>${image.comments}</p>\n          </div>\n          <div class=\"stat-item\">\n            <p class=\"stat-title\">Downloads</p>\n            <p>${image.downloads}</p>\n          </div>\n        </div>\n      </li>\n    `)\n    .join(\"\");\n\n  galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n  gallery.refresh();\n}\n\nfunction clearGallery() {\n  const galleryContainer = document.querySelector(\".gallery\");\n  galleryContainer.innerHTML = \"\";\n}\n\nfunction showLoader() {\n  const loader = document.querySelector(\".loader\");\n  loader.classList.add(\"is-loading\");\n}\n\nfunction hideLoader() {\n  const loader = document.querySelector(\".loader\");\n  loader.classList.remove(\"is-loading\");\n}\n\nfunction showLoadMoreButton() {\n  const loadMore = document.querySelector(\".loadMore\");\n  loadMore.classList.remove(\"hidden\");\n}\n\nfunction hideLoadMoreButton() {\n  const loadMore = document.querySelector(\".loadMore\");\n  loadMore.classList.add(\"hidden\");\n}\n\nconst render = {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton\n}\n\nexport default render;","import { getImagesByQuery, resetPage, nextPage, setQuery, getQuery } from \"./js/pixabay-api.js\";\nimport render from \"./js/render-functions.js\";\nimport iziToast from 'izitoast';\n\nlet form = document.querySelector('.form');\nlet loadMore = document.querySelector('.loadMore');\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  const query = document.querySelector('input').value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query',\n      titleColor: \"#fff\",\n      messageColor: \"#fff\",\n      position: 'topRight'\n    });\n    return;\n  }\n\n  setQuery(query);\n  resetPage();\n  render.clearGallery();\n  render.hideLoadMoreButton();\n  render.showLoader();\n\n  try {\n    const images = await getImagesByQuery(query);\n    render.hideLoader();\n\n    if (images.length === 0) {\n      iziToast.error({\n        title: 'No results',\n        message: 'Sorry, there are no images matching your search query. Please, try again!',\n        titleColor: \"#fff\",\n        messageColor: \"#fff\",\n        backgroundColor: \"#EF4040\",\n        position: 'topRight'\n      });\n      return;\n    }\n\n    render.createGallery(images);\n    if (images.length === 15) {\n      render.showLoadMoreButton();\n    }\n  } catch (error) {\n    render.hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again.',\n      titleColor: \"#fff\",\n      messageColor: \"#fff\",\n      backgroundColor: \"#EF4040\",\n      position: 'topRight'\n    });\n  }\n});\n\nloadMore.addEventListener('click', async () => {\n  nextPage();\n  const query = getQuery();\n\n  render.showLoader();\n\n  try {\n    const images = await getImagesByQuery(query);\n    render.hideLoader();\n    render.createGallery(images);\n\n    if (images.length < 15) {\n      render.hideLoadMoreButton();\n      iziToast.info({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        titleColor: \"#fff\",\n        messageColor: \"#fff\",\n        position: 'topRight'\n      });\n    }\n  } catch (error) {\n    render.hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again.',\n      titleColor: \"#fff\",\n      messageColor: \"#fff\",\n      backgroundColor: \"#EF4040\",\n      position: 'topRight'\n    });\n  }\n});"],"names":["API_KEY","pageCount","currentQuery","getImagesByQuery","query","axios","resetPage","nextPage","setQuery","getQuery","gallery","SimpleLightbox","createGallery","images","galleryContainer","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","render","form","loadMore","event","iziToast"],"mappings":"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"}